<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhuquan.mapper.RecruitInfoMapper">


    <!--    学生查询 招聘信息-->
    <select  id="findRecruitInfoByPage"  parameterType="com.zhuquan.domain.RecruitRequest" resultType="map">
        select
            ri.id as id, ri.position_Name as positionName, ri.waves_Begin as wavesBegin, ri.waves_End as wavesEnd, ri.education as education,

            ci.industry as industry, ci.address as address,

            u.name as companyName, u.avatar as avatar

        from recruit_info ri
            left join company_info ci   on ri.company_id = ci.user_id
            left join user u on ci.user_id = u.id

        <where>
            <if test="keyword != null and keyword != '' ">
                and (ri.position_Name like "%"#{keyword}"%" or u.name like "%"#{keyword}"%" or  ci.full_Name like "%"#{keyword}"%")
            </if>

            <if test="wavesBegin != null and wavesEnd != null">
                and !(ri.waves_Begin >  #{wavesEnd}  or #{wavesBegin} > ri.waves_End)
            </if>

            <if test="industry != null and industry != '' ">
                and ci.industry = #{industry}
            </if>

            <if test="scale != null and scale != '' ">
                and ci.scale = #{scale}
            </if>

            <if test="address != null and address != '' ">
                and ci.address = #{address}
            </if>
            <if test="position != null and position != '' ">
                and ri.position = #{position}
            </if>
            <if test="status != null  ">
                and ri.status = #{status}
            </if>
        </where>

        order by ri.create_date desc

    </select >



</mapper>